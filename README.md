# UEM Deployment Tools

> ä¸€ä¸ªç”¨äºUEMï¼ˆç»Ÿä¸€ç«¯ç‚¹ç®¡ç†ï¼‰éƒ¨ç½²ã€ç›‘æ§å’Œç»´æŠ¤çš„è¾…åŠ©å·¥å…·é›†ã€‚

è¯¥å·¥å…·åŒ…å«ä¸€ä¸ªåœ¨ Windows ä¸Šè¿è¡Œçš„å®¢æˆ·ç«¯ (`uemtools.exe`) å’Œä¸€ä¸ªåœ¨ç›®æ ‡ Linux æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ä»£ç† (`cncyagent`)ã€‚ç”¨æˆ·é€šè¿‡å®¢æˆ·ç«¯ä¸è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»£ç†è¿›è¡Œäº¤äº’ï¼Œå®ç°å„ç§è‡ªåŠ¨åŒ–æ“ä½œå’Œç›‘æ§ã€‚

## ğŸš€ äº§å“åŠŸèƒ½ (Product Features)

å·¥å…·çš„å‰ç«¯ç•Œé¢æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š

#### 1. ğŸ” æ“ä½œç³»ç»Ÿ
- **å®æ—¶èµ„æºç›‘æ§**: ä»¥å›¾è¡¨å½¢å¼å®æ—¶å±•ç¤º CPUã€å†…å­˜ä½¿ç”¨ç‡ã€ç³»ç»Ÿå¹³å‡è´Ÿè½½å’Œç½‘ç»œæµé‡ (Rx/Tx)ã€‚
- **åŸºç¡€ç¯å¢ƒæ£€æµ‹**: ä¸€é”®æ£€æŸ¥ CPU æ ¸å¿ƒæ•°ã€å†…å­˜å¤§å°ã€ç³»ç»Ÿæ¶æ„ã€æ“ä½œç³»ç»Ÿç‰ˆæœ¬å’Œ `ulimit` é™åˆ¶ï¼Œå¹¶ç»™å‡ºæ˜¯å¦æ»¡è¶³å»ºè®®è§„æ ¼çš„åˆ¤æ–­ã€‚
- **ç£ç›˜ç©ºé—´æ¦‚è§ˆ**: ä»¥è¿›åº¦æ¡å½¢å¼æ¸…æ™°å±•ç¤ºæ‰€æœ‰æŒ‚è½½ç‚¹çš„ç£ç›˜ä½¿ç”¨æƒ…å†µã€‚
- **å®‰å…¨ä¸ç½‘ç»œ**:
    - æ£€æŸ¥å¹¶æä¾›ä¸€é”®ä¿®å¤ SELinux å’Œé˜²ç«å¢™çŠ¶æ€çš„åŠŸèƒ½ã€‚
    - æ£€æŸ¥å¹¶æä¾›ä¸€é”®å¼€å¯ SSH éš§é“è½¬å‘ (`AllowTcpForwarding`) çš„åŠŸèƒ½ã€‚
    - **ç½‘ç»œç«¯å£**: å®æ—¶æ˜¾ç¤º `netstat -nltp` çš„ç»“æœï¼Œæ–¹ä¾¿æŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€ã€‚
    - **TCP è¿æ¥æ•°**: å®æ—¶ç»Ÿè®¡å½“å‰ç³»ç»Ÿçš„æ€» TCP è¿æ¥æ•°é‡ã€‚
- **UEM æœåŠ¡ç›‘æ§**: è‡ªåŠ¨æ£€æµ‹ UEM æ˜¯å¦å®‰è£…ï¼Œå¹¶å®æ—¶å±•ç¤ºæ‰€æœ‰ç›¸å…³æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼Œæä¾›å•ç‹¬é‡å¯æœåŠ¡çš„åŠŸèƒ½ã€‚
- **MinIO æ£€æµ‹**: æ£€æŸ¥ MinIO å­˜å‚¨æ¡¶æ˜¯å¦å­˜åœ¨ä»¥åŠå…¶è®¿é—®ç­–ç•¥æ˜¯å¦ä¸ºå…¬å¼€ï¼Œå¹¶æä¾›ä¸€é”®ä¿®å¤ä¸ºå…¬å¼€è¯»ç­–ç•¥çš„åŠŸèƒ½ã€‚

#### 2. ğŸ”§ ç¯å¢ƒä¾èµ–
- **ISO æŒ‚è½½**: æ”¯æŒé€šè¿‡ä¸Šä¼  ISO é•œåƒæ–‡ä»¶æˆ–æŒ‡å®šæœåŠ¡å™¨ä¸Šçš„æœ¬åœ°è·¯å¾„ï¼Œè‡ªåŠ¨å°†å…¶æŒ‚è½½å¹¶é…ç½®ä¸ºæœ¬åœ° YUM æºã€‚
- **RPM å®‰è£…**: æ”¯æŒåœ¨çº¿ä¸Šä¼  RPM åŒ…å¹¶ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œå®‰è£…ã€‚

#### 3. ğŸ“¦ éƒ¨ç½²/æ›´æ–°
- **çµæ´»çš„éƒ¨ç½²è·¯å¾„**: æ”¯æŒæŒ‡å®šä»»æ„æœåŠ¡å™¨ç›®å½•ä½œä¸ºå·¥ä½œç›®å½•ã€‚
- **è„šæœ¬è‡ªåŠ¨æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹æŒ‡å®šç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨ `install.sh` (ç”¨äºé¦–æ¬¡éƒ¨ç½²) å’Œ `mdm.sh` (ç”¨äºæ›´æ–°)ï¼Œå¹¶æ ¹æ®æ£€æµ‹ç»“æœåŠ¨æ€å¯ç”¨ç›¸å…³æ“ä½œæŒ‰é’®ã€‚
- **ä¸€é”®å¼æ“ä½œ**:
    - **é¦–æ¬¡éƒ¨ç½²**: æ‰§è¡Œ `install.sh`ã€‚
    - **UEM æ›´æ–°**: æ‰§è¡Œ `mdm.sh uem`ã€‚
    - **WebUI æ›´æ–°**: æ‰§è¡Œ `mdm.sh webui`ã€‚
    - **Tomcat æ›´æ–°**: æ‰§è¡Œ `mdm.sh tomcat`ã€‚
- **å®æ—¶è¾“å‡º**: æ‰€æœ‰éƒ¨ç½²å’Œæ›´æ–°æ“ä½œçš„è¾“å‡ºéƒ½ä¼šå®æ—¶æ˜¾ç¤ºåœ¨ç½‘é¡µç»ˆç«¯ä¸­ã€‚

#### 4. ğŸ“‚ æ–‡ä»¶ç®¡ç†
- æä¾›ä¸€ä¸ªç®€å•çš„ç½‘é¡µç‰ˆæ–‡ä»¶æµè§ˆå™¨ã€‚
- æ”¯æŒåœ¨æœåŠ¡å™¨ä¸Šæµè§ˆç›®å½•ã€è¿”å›ä¸Šçº§ã€‚
- æ”¯æŒä»æœ¬åœ°ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨çš„å½“å‰ç›®å½•ã€‚
- æ”¯æŒä¸‹è½½æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚

#### 5. ğŸ’» ç»ˆç«¯
- æä¾›ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ã€äº¤äº’å¼çš„ç½‘é¡µ Shell ç»ˆç«¯ï¼Œå¯ä»¥ç›´æ¥æ“ä½œæœåŠ¡å™¨ã€‚

#### 6. ğŸ“œ æ—¥å¿—æŸ¥çœ‹
- **å¤šæ—¥å¿—æº**: é¢„è®¾äº† Tomcat, Nginx, AppServer ç­‰å¤šä¸ªå¸¸ç”¨æœåŠ¡çš„æ—¥å¿—ã€‚
- **å®æ—¶æµå¼ä¼ è¾“**: ç‚¹å‡»å³å¯å®æ—¶æŸ¥çœ‹æ—¥å¿— (`tail -f`)ã€‚
- **ä¾¿æ·æ“ä½œ**: æ”¯æŒè‡ªåŠ¨æ»šåŠ¨ã€æ¸…ç©ºæ˜¾ç¤ºå’Œä¸€é”®ä¸‹è½½æ—¥å¿—æ–‡ä»¶ã€‚

#### 7. âš™ï¸ åŸºç¡€æœåŠ¡
- **é›¶é…ç½®ç›‘æ§**: å·¥å…·èƒ½å¤Ÿ**è‡ªåŠ¨è¯»å–** UEM çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ `global.properties`ï¼Œä»ä¸­è·å– Redisã€MySQLã€RabbitMQ ç­‰æœåŠ¡çš„è¿æ¥ä¿¡æ¯ï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ã€‚
- **Redis**:
    - å®æ—¶æŸ¥çœ‹ Redis çš„å„é¡¹æ€§èƒ½æŒ‡æ ‡ã€‚
    - æµè§ˆã€æŸ¥çœ‹ã€ä¿®æ”¹å’Œåˆ é™¤ Key-Valueã€‚
- **MySQL**:
    - å®æ—¶ç›‘æ§å¤šå®ä¾‹ (mdm, multitenant) çš„ QPSã€çº¿ç¨‹æ•°ã€è¿æ¥æ•°ã€ä¸»ä»å»¶è¿Ÿç­‰çŠ¶æ€ã€‚
    - ä»¥å›¾è¡¨å½¢å¼å±•ç¤ºè¡¨ç©ºé—´å’Œè¡¨æ“ä½œçš„ Top 10ã€‚
    - æŸ¥çœ‹å®æ—¶è¿›ç¨‹åˆ—è¡¨ (`SHOW FULL PROCESSLIST`)ã€‚
    - æä¾› SQL æ‰§è¡Œå™¨ï¼Œå¯ç›´æ¥æ‰§è¡ŒæŸ¥è¯¢æˆ–ä¿®æ”¹è¯­å¥å¹¶æŸ¥çœ‹ç»“æœã€‚
- **RabbitMQ & MinIO**:
    - é€šè¿‡åå‘ä»£ç†å°†å®ƒä»¬çš„ç®¡ç†åå°æ— ç¼å†…åµŒåˆ°å·¥å…·ä¸­ï¼Œæ— éœ€å†æ¬¡ç™»å½•æˆ–æš´éœ²ç«¯å£ã€‚

## ğŸ› ï¸ æŠ€æœ¯å®ç° (Technical Implementation)

#### 1. é¡¹ç›®æ¶æ„
æœ¬é¡¹ç›®é‡‡ç”¨ **C/S æ¶æ„**ï¼Œå¹¶é€šè¿‡ **Wails** æŠ€æœ¯å°†å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯èƒ½åŠ›æ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„ Windows æ¡Œé¢åº”ç”¨ã€‚

- **Agent (åç«¯ä»£ç†)**: ä¸€ä¸ªçº¯ Go è¯­è¨€ç¼–å†™çš„è½»é‡çº§ Web æœåŠ¡å™¨ï¼Œè¿è¡Œåœ¨ç›®æ ‡ Linux æœåŠ¡å™¨ä¸Šã€‚å®ƒä¸ä¾èµ–ä»»ä½•å¤–éƒ¨è¿è¡Œæ—¶ï¼Œå…·æœ‰å‡ºè‰²çš„è·¨å¹³å°å’Œæ€§èƒ½è¡¨ç°ã€‚
- **Client (å‰ç«¯å®¢æˆ·ç«¯)**: ä¸€ä¸ªåŸºäº **Wails v2** çš„ Windows æ¡Œé¢åº”ç”¨ã€‚Wails ä½¿ç”¨ Go ä½œä¸ºåç«¯ï¼Œé€šè¿‡ WebView2 æ¸²æŸ“å‰ç«¯ UIï¼Œå®ç°äº†æ¥è¿‘æœ¬æœºçš„æ€§èƒ½å’Œä½“éªŒã€‚

---

#### 2. Agent æ ¸å¿ƒå®ç°æ–¹æ³•

Agent æ˜¯æ‰€æœ‰è¿œç¨‹æ“ä½œçš„æ‰§è¡Œè€…ã€‚

- **Web æœåŠ¡**:
    - ä½¿ç”¨ **Gin** (`github.com/gin-gonic/gin`) æ¡†æ¶æ„å»ºï¼Œå®ƒä»¥é«˜æ€§èƒ½å’Œç®€æ´çš„ API è®¾è®¡è‘—ç§°ã€‚
    - Agent å¯åŠ¨åï¼Œä¼šç›‘å¬ä¸€ä¸ªç«¯å£ï¼ˆé»˜è®¤ä¸º `9898`ï¼‰ï¼Œæä¾›ä¸¤ç±»æœåŠ¡ï¼š
        1.  **RESTful API**: ç”¨äºå¤„ç†æ— çŠ¶æ€ã€ä¸€æ¬¡æ€§çš„è¯·æ±‚ï¼Œå¦‚è·å–ç³»ç»Ÿä¿¡æ¯ (`/api/check`)ã€åˆ—å‡ºæ–‡ä»¶ (`/api/fs/list`) ç­‰ã€‚
        2.  **WebSocket æœåŠ¡**: ç”¨äºéœ€è¦æŒä¹…è¿æ¥å’Œå®æ—¶åŒå‘é€šä¿¡çš„åœºæ™¯ã€‚

- **ç³»ç»Ÿä¿¡æ¯ä¸æœåŠ¡å‘ç°**:
    - **å‘½ä»¤æ‰§è¡Œ**: å¤§éƒ¨åˆ†ç³»ç»Ÿä¿¡æ¯é€šè¿‡ `os/exec` åŒ…æ‰§è¡Œæ ‡å‡†çš„ Linux å‘½ä»¤å¹¶è§£æå…¶ `stdout` æ¥è·å¾—ã€‚ä¾‹å¦‚ï¼š
        - `netstat -nltp`: è·å–ç›‘å¬ä¸­çš„ TCP ç«¯å£ä¿¡æ¯ã€‚Go ä»£ç ä¼šé€è¡Œè§£æè¾“å‡ºï¼Œæå–åè®®ã€åœ°å€ã€PID ç­‰å…³é”®å­—æ®µï¼Œå¹¶å°†å…¶æ„é€ æˆ JSON æ•°ç»„è¿”å›ç»™å‰ç«¯ã€‚
        - `df -h`: è·å–ç£ç›˜åˆ†åŒºä¿¡æ¯ã€‚
        - `ulimit -n`: è·å–æ–‡ä»¶å¥æŸ„æ•°é™åˆ¶ã€‚
    - **æ–‡ä»¶è¯»å–**: éƒ¨åˆ†æ ¸å¿ƒæŒ‡æ ‡ï¼ˆå¦‚å†…å­˜ã€CPUï¼‰ç›´æ¥è¯»å– `/proc` æ–‡ä»¶ç³»ç»Ÿä¸‹çš„æ–‡ä»¶ï¼ˆå¦‚ `/proc/meminfo`, `/proc/loadavg`ï¼‰æ¥è·å–åŸå§‹æ•°æ®ï¼Œè¿™æ ·åšæ¯”æ‰§è¡Œå‘½ä»¤æ›´é«˜æ•ˆã€‚
    - **è‡ªåŠ¨æœåŠ¡å‘ç° (é€šè¿‡ `global.properties`)**:
        - **å®šä½æ–‡ä»¶**: Agent å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨å°è¯•è¯»å– UEM çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ `/opt/emm/current/config/global.properties`ã€‚
        - **è§£æé…ç½®**: ä½¿ç”¨ `github.com/magiconair/properties` åº“è§£æè¯¥ `.properties` æ–‡ä»¶ã€‚
        - **æå–å…³é”®ä¿¡æ¯**: ä»æ–‡ä»¶ä¸­è¯»å–ä»¥ä¸‹å…³é”®é…ç½®é¡¹ï¼š
            - `system.redis.host`, `system.redis.port`, `system.redis.password`
            - `jdbc.url`, `jdbc.username`, `jdbc.password` (ç”¨äºä¸»æ•°æ®åº“ `mdm`)
            - `jdbc.multitenant.url`, `jdbc.multitenant.username`, `jdbc.multitenant.password` (ç”¨äºå¤šç§Ÿæˆ·æ•°æ®åº“)
            - `spring.rabbitmq.addresses`, `rabbitmq.admin.port`
            - `storage.minio.url`
        - **å»ºç«‹è¿æ¥**: åŸºäºè¿™äº›æå–å‡ºçš„ä¿¡æ¯ï¼ŒAgent åˆå§‹åŒ–åˆ°å„ä¸ªæœåŠ¡çš„è¿æ¥æ± ï¼ˆå¦‚ `database/sql` å’Œ `go-redis`ï¼‰ï¼Œä»è€Œå®ç°äº†å¯¹è¿™äº›åŸºç¡€æœåŠ¡çš„â€œé›¶é…ç½®â€ç›‘æ§å’Œç®¡ç†ã€‚

- **äº¤äº’å¼ç»ˆç«¯ä¸å®æ—¶æ—¥å¿—**:
    - **ä¼ªç»ˆç«¯ (PTY)**: ä½¿ç”¨ `github.com/creack/pty` åº“åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œå¹¶å°†ç”¨æˆ·çš„ Shellï¼ˆå¦‚ `/bin/bash`ï¼‰é™„åŠ åˆ°è¯¥ç»ˆç«¯ä¸Šã€‚
    - **WebSocket æ¡¥æ¥**:
        1.  å‰ç«¯ï¼ˆä½¿ç”¨ **Xterm.js**ï¼‰æ•è·ç”¨æˆ·çš„æŒ‰é”®è¾“å…¥ï¼Œé€šè¿‡ WebSocket å°†æ•°æ®å‘é€åˆ° Agentã€‚
        2.  Agent æ¥æ”¶åˆ°æ•°æ®åï¼Œå°†å…¶å†™å…¥ PTY çš„ master ç«¯ï¼Œæ¨¡æ‹ŸçœŸå®ç»ˆç«¯çš„è¾“å…¥ã€‚
        3.  Shell åœ¨ PTY çš„ slave ç«¯æ‰§è¡Œå‘½ä»¤ï¼Œå…¶è¾“å‡ºè¢« Agent ä» PTY çš„ master ç«¯è¯»å–ã€‚
        4.  Agent å°†è¯»å–åˆ°çš„è¾“å‡ºé€šè¿‡ WebSocket å®æ—¶åœ°å›ä¼ ç»™å‰ç«¯çš„ Xterm.js è¿›è¡Œæ˜¾ç¤ºã€‚
    - **å®æ—¶æ—¥å¿—** (`tail -f`) çš„å®ç°ä¸æ­¤ç±»ä¼¼ï¼Œåªæ˜¯å°† `bash` æ¢æˆäº† `tail -f /path/to/log` å‘½ä»¤ã€‚

---

#### 3. Client ä¸ Agent çš„é€šä¿¡æµç¨‹

è¿™æ˜¯æ•´ä¸ªå·¥å…·é“¾çš„æ ¸å¿ƒã€‚

1.  **å¯åŠ¨ä¸è¿æ¥**:
    - ç”¨æˆ·åœ¨ Wails åº”ç”¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„ IPã€ç”¨æˆ·åå’Œå¯†ç ã€‚
    - Wails çš„ Go åç«¯ä½¿ç”¨ `golang.org/x/crypto/ssh` åŒ…å»ºç«‹ä¸€ä¸ªåˆ°ç›®æ ‡æœåŠ¡å™¨çš„ SSH è¿æ¥ã€‚

2.  **Agent éƒ¨ç½²ä¸å¯åŠ¨**:
    - é¡¹ç›®åœ¨ç¼–è¯‘æ—¶ï¼Œå·²é€šè¿‡ Go çš„äº¤å‰ç¼–è¯‘åŠŸèƒ½å°† Agent ä»£ç ç¼–è¯‘æˆ `amd64` å’Œ `arm64` ä¸¤ç§æ¶æ„çš„ Linux äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶å°†å…¶**åµŒå…¥**åˆ° Wails å®¢æˆ·ç«¯ `uemtools.exe` ä¸­ã€‚
    - SSH è¿æ¥æˆåŠŸåï¼Œå®¢æˆ·ç«¯é¦–å…ˆæ£€æµ‹æœåŠ¡å™¨çš„æ¶æ„ (`uname -m`)ã€‚
    - æ ¹æ®æ¶æ„ï¼Œé€‰æ‹©å¯¹åº”çš„ Agent äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€šè¿‡ SSH çš„ SFTP åŠŸèƒ½å°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼ˆå¦‚ `/tmp/cncyagent_amd64`ï¼‰ã€‚
    - å®¢æˆ·ç«¯é€šè¿‡ SSH æ‰§è¡Œå‘½ä»¤ï¼Œä¸º Agent æ·»åŠ æ‰§è¡Œæƒé™ (`chmod +x`)ï¼Œç„¶åå¯åŠ¨å®ƒã€‚

3.  **å»ºç«‹é€šä¿¡éš§é“ (SSH ç«¯å£è½¬å‘)**:
    - Agent åœ¨æœåŠ¡å™¨ä¸Šç›‘å¬çš„æ˜¯ `127.0.0.1:9898`ï¼Œè¿™æ˜¯ä¸€ä¸ªä»…é™æœåŠ¡å™¨æœ¬åœ°è®¿é—®çš„åœ°å€ï¼Œä¿è¯äº†å®‰å…¨æ€§ã€‚
    - ä¸ºäº†è®© Wails å®¢æˆ·ç«¯ï¼ˆè¿è¡Œåœ¨ç”¨æˆ·çš„ Windows ç”µè„‘ä¸Šï¼‰èƒ½å¤Ÿè®¿é—®åˆ°è¿™ä¸ªç«¯å£ï¼Œå®¢æˆ·ç«¯åœ¨å»ºç«‹ SSH è¿æ¥çš„åŒæ—¶ï¼Œä¼šè®¾ç½®ä¸€ä¸ª**æœ¬åœ°ç«¯å£è½¬å‘** (Local Port Forwarding)ã€‚
    - è¿™æ„å‘³ç€ï¼Œå®¢æˆ·ç«¯ä¼šç›‘å¬è‡ªå·±ç”µè„‘ä¸Šçš„ä¸€ä¸ªç«¯å£ï¼ˆä¾‹å¦‚ `localhost:39898`ï¼‰ï¼Œå¹¶å°†æ‰€æœ‰å‘é€åˆ°è¯¥ç«¯å£çš„æµé‡é€šè¿‡ SSH å®‰å…¨éš§é“è½¬å‘åˆ°æœåŠ¡å™¨çš„ `127.0.0.1:9898`ã€‚

4.  **å‰ç«¯äº¤äº’**:
    - Wails åº”ç”¨çš„å‰ç«¯ UI æ˜¯ä¸€ä¸ªå†…åµŒçš„ç½‘é¡µã€‚è¿™ä¸ªç½‘é¡µä¸­çš„æ‰€æœ‰ API è¯·æ±‚ï¼ˆé€šè¿‡ `fetch`ï¼‰å’Œ WebSocket è¿æ¥ï¼Œå®é™…ä¸Šè®¿é—®çš„éƒ½æ˜¯ `http://localhost:39898`ã€‚
    - è¿™äº›è¯·æ±‚è¢« SSH å®¢æˆ·ç«¯æ‹¦æˆªï¼ŒåŠ å¯†åé€šè¿‡éš§é“å‘é€åˆ°æœåŠ¡å™¨ï¼Œæœ€ç»ˆåˆ°è¾¾ Agentã€‚Agent å¤„ç†åè¿”å›çš„æ•°æ®å†æ²¿ç€éš§é“ä¼ å›å‰ç«¯ã€‚
    - å¯¹ç”¨æˆ·å’Œå‰ç«¯ä»£ç æ¥è¯´ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯é€æ˜çš„ï¼Œå°±åƒåœ¨ç›´æ¥è®¿é—®ä¸€ä¸ªæœ¬åœ°æœåŠ¡ã€‚

---

#### 4. åå‘ä»£ç†çš„å®ç°

ä¸ºäº†å°† RabbitMQ å’Œ MinIO çš„ Web ç®¡ç†åå°æ— ç¼é›†æˆï¼ŒAgent å†…ç½®äº†ä¸€ä¸ªåŸºäº `net/http/httputil.NewSingleHostReverseProxy` çš„åå‘ä»£ç†ã€‚

- **è§£å†³è·¨åŸŸå’Œç«¯å£é—®é¢˜**: æ— éœ€å°† RabbitMQ/MinIO çš„ç®¡ç†ç«¯å£æš´éœ²åˆ°å…¬ç½‘ï¼Œå‰ç«¯åªéœ€ä¸ Agent çš„ç«¯å£é€šä¿¡ã€‚
- **è·¯å¾„é‡å†™**: ä»£ç†ä¼šæ‹¦æˆªç‰¹å®šè·¯å¾„çš„è¯·æ±‚ï¼ˆå¦‚ `/api/baseservices/rabbitmq/*`ï¼‰ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°å†…éƒ¨çš„ç®¡ç†ç«¯å£ï¼ˆå¦‚ `127.0.0.1:15672`ï¼‰ï¼Œå¹¶å°†å“åº”è¿”å›ç»™å‰ç«¯ã€‚
- **HTML å†…å®¹ä¿®å¤**: ç”±äºè¿™äº›ç®¡ç†åå°çš„ HTML/JS/CSS æ–‡ä»¶ä¸­çš„èµ„æºè·¯å¾„é€šå¸¸æ˜¯ç»å¯¹è·¯å¾„ï¼ˆå¦‚ `/css/main.css`ï¼‰ï¼Œç›´æ¥åœ¨ iframe ä¸­åŠ è½½ä¼šå¯¼è‡´ 404ã€‚ä»£ç†ä¼šåœ¨è¿”å›å“åº”å‰ï¼Œè¯»å– HTML/JS å†…å®¹ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ›¿æ¢ï¼Œå°†è¿™äº›è·¯å¾„åŠ¨æ€ä¿®æ”¹ä¸ºå¸¦ä»£ç†å‰ç¼€çš„è·¯å¾„ï¼ˆå¦‚ `src="/css/main.css"` -> `src="/api/baseservices/rabbitmq/css/main.css"`ï¼‰ï¼Œä»è€Œç¡®ä¿æ‰€æœ‰èµ„æºéƒ½èƒ½è¢«æ­£ç¡®åŠ è½½ã€‚

## ğŸ—ï¸ å¦‚ä½•æ„å»º (How to Build)

é¡¹ç›®æä¾›äº†ä¸€ä¸ª `build.sh` è„šæœ¬æ¥è‡ªåŠ¨åŒ–æ•´ä¸ªæ„å»ºæµç¨‹ã€‚

1.  ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒä¸­å·²å®‰è£… Go å’Œ Wails v2ã€‚
2.  åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    ```sh
    sh build.sh
    ```
3.  è„šæœ¬ä¼šå®Œæˆä»¥ä¸‹å·¥ä½œï¼š
    - äº¤å‰ç¼–è¯‘ç”Ÿæˆä¸¤ä¸ª Linux Agent: `cncyagent_amd64` å’Œ `cncyagent_arm64`ã€‚
    - ä½¿ç”¨ Wails æ„å»º Windows å®¢æˆ·ç«¯ `uemtools.exe`ï¼Œå¹¶å°†ä¸Šè¿° Agent äºŒè¿›åˆ¶æ–‡ä»¶åµŒå…¥å…¶ä¸­ã€‚
    - å°†æ‰€æœ‰ç”Ÿæˆç‰©ç§»åŠ¨åˆ° `build/bin/` ç›®å½•ä¸‹ã€‚

æ„å»ºæˆåŠŸåï¼Œæ‰€æœ‰äº§ç‰©éƒ½ä½äº `build/bin/` ç›®å½•ä¸­ã€‚
